/*! Rappid v1.7.2 - HTML5 Diagramming Framework - TRIAL VERSION

Copyright (c) 2015 client IO

 2016-07-06 


This Source Code Form is subject to the terms of the Rappid Trial License
, v. 2.0. If a copy of the Rappid License was not distributed with this
file, You can obtain one at http://jointjs.com/license/rappid_v2.txt
 or from the Rappid archive as was distributed by client IO. See the LICENSE file.*/


joint.ui.Clipboard=Backbone.Collection.extend({LOCAL_STORAGE_KEY:"joint.ui.Clipboard.cells",copyElements:function(a,b,c){c=c||{};var d=b.cloneSubgraph(a.models,c),e=[],f=[],g=[];return _.each(d,function(a,d){a.isLink()?(c.translate&&_.each(a.get("vertices"),function(a){a.x+=c.translate.dx||20,a.y+=c.translate.dy||20}),g.push(a)):(c.translate&&a.translate(c.translate.dx||20,c.translate.dy||20),f.push(a)),e.push(b.getCell(d))}),this.reset(f.concat(g)),c.useLocalStorage&&window.localStorage&&localStorage.setItem(this.LOCAL_STORAGE_KEY,JSON.stringify(this.toJSON())),e},pasteCells:function(a,b){if(b=b||{},b.useLocalStorage&&this.isEmpty()&&window.localStorage){var c={cells:JSON.parse(localStorage.getItem(this.LOCAL_STORAGE_KEY))},d=(new joint.dia.Graph).fromJSON(c,{sort:!1});this.reset(d.getCells())}a.trigger("batch:start"),this.each(function(c){c.unset("z"),c instanceof joint.dia.Link&&b.link&&c.set(b.link),a.addCell(c.toJSON())}),a.trigger("batch:stop")},clear:function(){this.reset([]),window.localStorage&&localStorage.removeItem(this.LOCAL_STORAGE_KEY)}});